# База данных Secure Searchable Encryption (SSE)

Этот проект реализует систему базы данных **Secure Searchable Encryption (SSE)** с использованием Python. Система обеспечивает зашифрованное хранение и безопасный поиск по ключевым словам в зашифрованных документах. Она объединяет SQLite для хранения и криптографию для шифрования и хеширования ключевых слов.

## Особенности

1. **Зашифрованное хранилище документов**:
- Шифрование AES-GCM обеспечивает конфиденциальность и целостность хранимого контента.

2. **Поиск по ключевым словам**:
- Использует HMAC-SHA256 для безопасного хеширования ключевых слов.
- Поддерживает поиск без расшифровки хранимого контента.

3. **Управление документами**:
- Добавление, удаление, просмотр и составление списка документов.

4. **Вывод безопасного ключа**:
- Генерация ключа на основе парольной фразы с использованием PBKDF2-HMAC-SHA256 с уникальной солью для каждой базы данных.

5. **SQLite Backend**:
- Постоянное хранилище для зашифрованных документов и метаданных.

## Как это работает

1. **Шифрование**:
- Документы шифруются с помощью AES-GCM с производным ключом шифрования.
- Случайные IV и теги аутентификации обеспечивают целостность и уникальность данных.

2. **Хеширование ключевых слов**:
- Ключевые слова хешируются с помощью HMAC с ключом шифрования.
- Сохраняется только хеш, что позволяет выполнять поиск по ключевым словам без раскрытия ключевых слов в виде открытого текста.

3. **Хранилище базы данных**:
- Документы, их зашифрованное содержимое и хеш ключевых слов хранятся в таблицах SQLite.

4. **Защита паролем**:
- Для получения ключа шифрования используется предоставленная пользователем парольная фраза.
- Уникальная соль обеспечивает защиту от повторного использования парольной фразы.

## Установка

### Предварительные условия

- **Python 3.8+**
- **Зависимости**:
Установите требуемые пакеты Python:

```bash
pip install cryptography
```

### Использование

1. Клонируйте или загрузите проект.
2. Сохраните код в файле (например, `secure_sse.py`).
3. Запустите скрипт с помощью:

```bash
python secure_sse.py
```

## Меню приложения

При запуске скрипта вы будете взаимодействовать с меню, предлагающим следующие параметры:

1. **Добавить документ**:
- Введите идентификатор документа, содержимое и связанные ключевые слова.
- Данные зашифрованы и надежно сохранены.

2. **Поиск документа**:
- Поиск документов по ключевому слову.
- Возвращает соответствующие идентификаторы документов без расшифровки сохраненных данных.

3. **Удалить документ**:
- Удалить документ из базы данных по его идентификатору.

4. **Список документов**:
- Просмотр всех сохраненных идентификаторов документов.

5. **Просмотр документа**:
- Расшифровать и отобразить содержимое документа по его идентификатору.

6. **Выход**:
- Выход из приложения.

## Структура кода

### Классы

- **`SecureSearchableEncryption`**:

Реализует основные функции, включая:
- Вывод ключа.
- Шифрование/дешифрование документа.
- Хеширование ключевых слов.
- Интеграция с SQLite.

### Ключевые методы

- **`add_document(doc_id, content, keywords)`**:
Шифрует и сохраняет документ со связанными ключевыми словами.

- **`search_document(keyword)`**:
Поиск документов, соответствующих хешированному ключевому слову.

- **`delete_document(doc_id)`**:
Удаляет документ по идентификатору.

- **`list_documents()`**:
Перечисляет все сохраненные идентификаторы документов.

- **`view_document2(doc_id)`**:
Расшифровывает и отображает содержимое документа.

### Таблицы базы данных

1. **`settings`**:
- Хранит уникальную соль для получения ключа.

2. **`documents`**:
- Хранит зашифрованное содержимое и хешированные ключевые слова.

## Вопросы безопасности

- **Управление парольной фразой**:
Убедитесь, что используется надежная уникальная парольная фраза.

- **Резервное копирование базы данных**:
Создавайте надежную резервную копию файла базы данных (`sse_secure.db`).

- **Безопасность ключа**:
Ключ шифрования выводится из парольной фразы и не сохраняется.

- **Соль**:

Уникальная соль предотвращает атаки до вычислений.

## Пример использования

1. **Добавить документ**:

Ввод:
```
Введите идентификатор документа: doc123
Введите содержимое документа: Secure content
Введите ключевые слова (через запятую): secret, sensitive
```

Вывод:
```
Документ doc123 успешно добавлен.

```

2. **Поиск документа**:

Ввод:
```
Введите ключевое слово для поиска: secret
```

Вывод:
```
Документы, содержащие ключевое слово:
- doc123
```

3. **Просмотр документа**:

Ввод:
```
Введите идентификатор документа для просмотра: doc123
```

Вывод:
```
Содержимое 'doc123':
Secure content
```

4. **Удаление документа**:

Ввод:
```
Введите идентификатор документа для удаления: doc123
```

Вывод:
```
Документ doc123 успешно удален.
```

## Примечания

- Приложение не поддерживает восстановление парольной фразы.
- Используйте методы безопасного хранения для файла `sse_secure.db`.
